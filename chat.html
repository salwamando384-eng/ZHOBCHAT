<!DOCTYPE html>
<html lang="ur">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZHOBCHAT - Chat Room</title>
<link rel="stylesheet" href="style.css">
<style>
  body { font-family:sans-serif; margin:0; padding:0; background:#f4f4f4; }
  .chat-header { background:#2ea043; color:#fff; padding:15px; text-align:center; font-size:20px; }
  #messages { height:400px; overflow-y:auto; background:#fff; margin:10px; padding:10px; border-radius:5px; }
  #chatForm { display:flex; margin:10px; }
  #msgInput { flex:1; padding:10px; border-radius:5px; border:1px solid #ccc; }
  #sendBtn { padding:10px 15px; margin-left:5px; border:none; border-radius:5px; background:#2ea043; color:#fff; cursor:pointer; }
</style>
</head>
<body>

<div class="chat-header">ZHOBCHAT - چیٹ روم</div>
<div id="messages"></div>
<form id="chatForm">
  <input type="text" id="msgInput" placeholder="پیغام لکھیں..." required>
  <button type="submit" id="sendBtn">بھیجیں</button>
</form>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDiso8BvuRZSWko7kTEsBtu99MKKGD7Myk",
  authDomain: "zhobchat-33d8e.firebaseapp.com",
  databaseURL: "https://zhobchat-33d8e-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "zhobchat-33d8e",
  storageBucket: "zhobchat-33d8e.appspot.com",
  messagingSenderId: "116466089929",
  appId: "1:116466089929:web:06e914c8ed81ba9391f218"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const chatForm = document.getElementById("chatForm");
const msgInput = document.getElementById("msgInput");
const messagesDiv = document.getElementById("messages");

chatForm.addEventListener("submit", (e) => {
  e.preventDefault();
  const msg = msgInput.value.trim();
  if(msg === "") return;

  push(ref(db, "messages"), {
    text: msg,
    time: new Date().toLocaleTimeString()
  });

  msgInput.value = "";
});

onChildAdded(ref(db, "messages"), (snapshot) => {
  const msgData = snapshot.val();
  const p = document.createElement("p");
  p.textContent = `[${msgData.time}] ${msgData.text}`;
  messagesDiv.appendChild(p);
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
});
</script>

</body>
</html>
